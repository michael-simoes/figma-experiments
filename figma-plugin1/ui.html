<style>
  body {
    font-family: sans-serif;
    padding: 10px;
  }
  textarea {
    box-sizing: border-box;
    width: 100%;
    height: 250px; /* Default height */
  }
</style>
<h2>Rectangle Creator</h2>
<p>Count: <input id="count" type="number" value="5"></p>
<button id="create">Create</button>
<button id="create-star">Create Star</button>

<hr>

<h2>Create Shape from JSON</h2>
<p>Enter ShapeConfig JSON below:</p>
<textarea id="json-config" rows="25"></textarea>
<br>
<button id="create-from-json">Create from JSON</button>

<hr>

<button id="cancel">Cancel</button>
<script>
document.getElementById('create').onclick = () => {
  const textbox = document.getElementById('count');
  const count = parseInt(textbox.value, 10);
  parent.postMessage({ pluginMessage: { type: 'create-shapes', count } }, '*')
}

document.getElementById('create-star').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'create-star' } }, '*')
}

document.getElementById('create-from-json').onclick = () => {
  const textarea = document.getElementById('json-config');
  let config;
  try {
    config = JSON.parse(textarea.value);
  } catch (e) {
    alert('Invalid JSON format!');
    return;
  }
  parent.postMessage({ pluginMessage: { type: 'create-shape-from-json', config } }, '*')
}

document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}

// Pre-fill with example JSON for easy testing
document.getElementById('json-config').value = JSON.stringify({
  type: 'rectangle',
  position: { x: 150, y: 100 },
  size: { width: 200, height: 150 },
  cornerRadius: 20,
  fills: [{ type: 'SOLID', color: { r: 0.2, g: 0.5, b: 0.9 } }]
}, null, 2);
</script>